# Описание gulp-сборки

## 1. JS
**Скрипты**
  + никак не обрабатываются (минификация на бэкэнде),
  + каждый файл по адресу [src/js/*.js] копируется в [docs/js/],
  + выбор подключаемых js-файлов к странице производится в файле [src/pug/pages/название_страницы.pug/ -> block js]
  + к каждой странице подключается 2 файла с пользовательскими скриптами: 1 - для всех страниц [all-pages.js]; 2 - для данной страницы [название_страницы.js].

~~конкатенация пользовательских скриптов~~ (отключено)

~~минификация пользовательских скриптов~~ (отключено)

## 2. HTML
**Используется шаблонизатор PUG:**
  + плагин plumber для вывода ошибок в терминал,
  + pretty: true - форматирование, запрет на минификацию.

~~Минификация HTML на выходе~~ (отключено)

~~collapseWhitespace: true - удаляем все переносы~~ (отключено)

~~removeComments: true - удаляем комментарии~~ (отключено)

## 3. CSS
**Используется препроцессор SCSS**
  + плагин plumber для вывода ошибок в терминал,
  + sassGlob - возможность подключать файлы глобально один в другой,
  + SASS синтаксис,
  + автопрефиксер,
  + выбор подключаемых css-файлов к странице производится в файле [src/pug/pages/название_страницы.pug -> block css],
  + *_.sass файлы из папок blocks и base [src/sass/blocks] подключаются в основные стилевые файлы (@import "./base/_fonts.sass"),
  + каждый файл по адресу [src/sass/*.sass] обрабатывается и выгружается в [docs/css/].

~~конкатенация всех файлов в styles.min.css~~ (отключено)

~~минификация~~ (отключено)

## 4. IMG
**JPG, PNG, SVG**
  + исходные изображения находятся в [src/img/src/],
  + PNG, JPG, SVG - сжимаем,
  + обработанные изображения помещаются в [src/img/dest/],
  + если изображение нельзя обработать - оно будет скопировано [src/img/dest/].
  + все изображения из [src/img/dest/*.*] копируются в [docs/img/]

~~WebP~~

~~все изображения, кроме изображений из папок icons и favicon, конвертируются в webp~~ (отключено)

~~сжимаем (quality: 80)~~ (отключено)

~~меняем расширение файла~~ (отключено)

**SVG-спрайт**
  + все изображения [src/img/] с префиксом [icon-*.svg] инлайнятся
  + создается файл (спрайт) - sprite.svg
  + помещается в [src/img/sprite.svg]
  + подключается в разметку на странице

### Алгоритм работы сборки

Папка **src** - исходные файлы.

Папка **docs** - скомпилированная вёрстка.

Запуск сборки:
  1. Выполнить команду **npm i** для установки всех пакетов
  2. Выполнить команду **gulp** для запуска сборки

**Последовательно**
  1. очищаем папку docs
  2. сжимаем картинки

~~3. создаем webp из других форматов~~

  4. создаем спрайт из svg иконок
  5. копируем все изображения в docs
  
**Параллельно**

  + операции с css
  + операции с html
  + копирование папки libs в docs
  + копирование папки fonts в docs
